import{S as L,i as l}from"./assets/vendor-46aac873.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerpolicy&&(s.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?s.credentials="include":t.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(t){if(t.ep)return;t.ep=!0;const s=n(t);fetch(t.href,s)}})();const w=document.querySelector(".form"),d=document.querySelector(".gallery"),a=document.querySelector(".loader"),u=document.querySelector(".load-more-btn"),p=new L(".gallery a",{captionsData:"alt",captionDelay:250});let c=1,f="";w.addEventListener("submit",S);u.addEventListener("click",b);function S(r){r.preventDefault();const e=r.currentTarget.elements.input.value;if(d.innerHTML="",a.classList.remove("is-hidden"),c=1,f=e,!e.trim()){l.warning({message:"Please, fill in the search field",position:"topLeft",timeout:3e3}),a.classList.add("is-hidden");return}m(e).then(n=>{n.hits.length===0&&l.error({message:"Sorry, there are no images matching your search query. Please try again!",position:"topRight",timeout:5e3}),d.innerHTML=g(n.hits),p.refresh(),h(n.hits.length,n.totalHits)}).catch(y).finally(()=>{a.classList.add("is-hidden"),h(15,data.totalHits)}),r.currentTarget.reset()}function m(r){const e="https://pixabay.com/api/",i=new URLSearchParams({key:"42027170-68cc294651d415255967a4fd3",q:r,image_type:"photo",orientation:"horizontal",safesearch:!0,page:c,per_page:15});return fetch(`${e}/?${i}`).then(t=>{if(!t.ok)throw new Error(t.status);return t.json()})}function g(r){return r.map(({webformatURL:e,largeImageURL:n,tags:i,likes:t,views:s,comments:o,downloads:v})=>`<li class="gallery-item">
        <a class="gallery-link" href="${n}">
           <img class="gallery-image" src="${e}" alt="${i}" />
        </a>
        <div class="container-additional-info">
          <div class="container-descr-inner"><p class="description">Likes</p><span class="description-value">${t}</span></div>
          <div class="container-descr-inner"><p class="description">Views</p><span class="description-value">${s}</span></div>
          <div class="container-descr-inner"><p class="description">Comments</p><span class="description-value">${o}</span></div>
          <div class="container-descr-inner"><p class="description">Downloads</p><span class="description-value">${v}</span></div>
        </div>
      </li>`).join("")}function y(r){console.error(r),d.innerHTML="",l.error({message:"Sorry, there is a problem with the connection with the server.",position:"center",timeout:5e3})}function b(){c++,a.classList.remove("is-hidden");const r=document.querySelector(".gallery-item").getBoundingClientRect().height;m(f).then(e=>{if(e.hits.length>0){const n=g(e.hits);d.insertAdjacentHTML("beforeend",n),p.refresh();const i=r*2;window.scrollBy({top:i,behavior:"smooth"})}h(e.hits.length,e.totalHits)}).catch(y).finally(()=>{a.classList.add("is-hidden")})}function h(r,e){r>=15&&e&&c*15<e?u.style.display="block":(u.style.display="none",e&&c*15>=e&&M())}function M(){l.info({message:"We're sorry, but you've reached the end of search results.",position:"bottomCenter",timeout:5e3})}
//# sourceMappingURL=commonHelpers.js.map
